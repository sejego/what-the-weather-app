(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var a=n.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e="6af93c0daeb0749c5631a37be0ef4bc8";async function n(t,n="metric"){let a=`https://api.openweathermap.org/data/2.5/weather?q=${t}&units=${n}&appid=${e}`;try{const t=await fetch(a,{mode:"cors"});if(200==t.status)return await t.json();throw new Error(`Invalid query - ${t.message}`)}catch(t){throw t}}async function a(t,n="metric"){let a=`https://api.openweathermap.org/data/2.5/forecast?q=${t}&units=${n}&appid=${e}`;try{const t=await fetch(a,{mode:"cors"});if(200==t.status)return await t.json();throw new Error(`Invalid query - ${t.message}`)}catch(t){throw t}}const o=document.getElementsByClassName("info-small"),c=document.getElementById("temperature"),i=document.getElementsByClassName("week-day"),r=document.getElementsByClassName("icon"),s=document.getElementById("location"),d=document.getElementsByClassName("icon")[0],u=document.getElementsByClassName("column");function l(t,e){o[e].textContent=`${t.temperature}°C`,i[e].children[0].textContent=t.fullDayName,i[e].children[1].textContent=t.ShortDayName,r[e+1].children[0].src=t.weatherIcon}const m=document.getElementById("error");function h(t){switch(t){case 1:m.style.height="40px",m.textContent="Location not found";break;case 2:m.style.height="40px",m.textContent="Cannot be empty!"}}function p(){m.style.height="0px",m.textContent=""}const g=t.p+"db983a0922633a90aa73.svg",f=t.p+"c23e7855e1cb8ac7c36d.svg",y=t.p+"91c54d35a1d823193fe7.svg",w=t.p+"ba3686e4a3d64a9dc5cf.svg",v=t.p+"4843a199da459ce5d58c.svg",b=t.p+"9858829fbac6db396ed7.svg",C=t.p+"7c3d1014174434d5d708.svg",x=t.p+"9f89c012c14bc7187187.svg",E=t.p+"90fd14198e4b9af0dd81.svg",$=t.p+"27d773eaaa631862b96f.svg",D=t.p+"41a01da10b2c84abde09.svg",N=t.p+"14b8fdcb58e3ad112ec3.svg",S={Ash:{icon:g},Clear:{day:{icon:f},night:{icon:y}},Clouds:{icon:w},Drizzle:{icon:v},Dust:{icon:b},Sand:{icon:b},Haze:{icon:C},Fog:{icon:C},Mist:{icon:x},Rain:{icon:E},Smoke:{icon:$},Snow:{icon:D},Squall:{icon:N},Tornado:{icon:N},Thunderstorm:{icon:t.p+"989e9cae9a9800e23f85.svg"}};function I(t,e="d"){return"Clear"===t?"d"===e?S[t].day.icon:S[t].night.icon:S[t].icon}function B(t,e){return new Date(t).toLocaleDateString("en-US",{weekday:e})}class T{constructor(){this.location="",this.description="",this.pressure=0,this.humidity=0,this.windSpeed=0,this.temperature=0,this.weatherIcon=""}}class k{constructor(){this.temperature=0,this.fullDayName="",this.shortDayNam="",this.weatherIcon=""}}const q=document.getElementsByName("Location")[0],L=document.getElementById("search-btn");async function M(t="Tallinn"){Promise.all([n(t),a(t)]).then((function(t){var e;(function(t){s.textContent=t.location,u[0].children[1].textContent=t.description,u[1].textContent=`Pressure: ${t.pressure}`,u[2].textContent=`Humidity: ${t.humidity}%`,u[3].textContent=`Wind: ${t.windSpeed}`,c.textContent=`${t.temperature}°C`,d.children[0].src=t.weatherIcon})((e=function(t){let e=new T,n=[];e.location=t[0].name,e.description=t[0].weather[0].description,e.pressure=t[0].main.pressure,e.humidity=t[0].main.humidity,e.windSpeed=t[0].wind.speed,e.temperature=Math.round(t[0].main.temp),e.weatherIcon=I(t[0].weather[0].main);for(let e=8;e<40;e+=8){let o=new k,c=t[1].list.slice(e,e+8);o.temperature=Math.round((a=c,Math.max(...a.map((t=>t.main.temp))))),o.fullDayName=B(1e3*c[0].dt,"long"),o.shortDayName=B(1e3*c[0].dt,"short"),o.weatherIcon=I(c[0].weather[0].main),n.push(o)}var a;return{currentDay:e,forecastDays:n}}(t)).currentDay),function(t){for(let e=0;e<4;e++)l(t[e],e)}(e.forecastDays)}),(function(t){throw t})).catch((t=>{console.log(t),h(1),setTimeout(p,1700)}))}q.addEventListener("input",(function(t){q.validity.valueMissing&&(h(2),setTimeout(p,1700))})),L.addEventListener("click",(()=>{M(q.value),q.value=""})),M()})();